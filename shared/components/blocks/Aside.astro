---
/**
 * Aside block component
 * - display a note or callout with text
 *
 * @param {FormattedText} text - the text content
 * @param {string} [class] - append classes to the container
 * @param {KeyTextField} [label] - optional label, e.g. 'note'
 * @param {'Default' | 'Small'} [typeSize='Default'] - size of the body text
 */

// --- styles ---
import '@shared/styles/tokens/borders.css';
import '@shared/styles/tokens/spacing.css';
import '@shared/styles/tokens/type.css';
import '@shared/styles/utilities/contentWidth.css';

// --- components ---
import Heading from '@shared/components/blocks/Heading.astro';
import Passage from '@shared/components/blocks/Passage.astro';

// --- types ---
import { KeyTextField } from '@prismicio/types';
import type { FormattedText } from '@shared/lib/types';

// --- props ---
const {
	text,
	class: className,
	label,
	typeSize = 'Default',
	...attrs
} = Astro.props;

const typeScale = {
	Default: 'epsilon',
	Small: 'zeta',
};

const classList = ['aside', className].join(' ');
---

<aside
	class={classList}
	{...attrs}
>
	{
		label && (
			<Heading
				class="type-scale-epsilon"
				level={2}
			>
				{label}
			</Heading>
		)
	}
	<slot>
		<Passage
			{text}
			class="text"
			typeSize={typeScale[typeSize]}
			typeFace="accent"
		/>
	</slot>
</aside>

<style>
	.aside {
		background-color: var(--color-well);
		border-radius: var(--border-radius-round);
		color: var(--color-secondary);
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: var(--space-medium);
	}

	.aside :global(.text) {
		font-style: italic;
	}
</style>
