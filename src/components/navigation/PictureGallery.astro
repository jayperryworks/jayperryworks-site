---
// utilities
import { picture as permalink } from '@lib/routes';

// components
import Image from '@components/elements/Image.astro';
import Gallery from '@components/layout/Gallery.astro';
import RevealOnScroll from '@components/layout/RevealOnScroll.astro';

// types
import { GallerySize } from '@lib/types';
import { PrismicDocumentWithUID } from '@prismicio/types';

export interface Props {
	list: PrismicDocumentWithUID[];
	aspectRatio?: string;
	columnSize?: GallerySize;
}

const {
	list,
	aspectRatio = '3 / 2',
	columnSize = 'medium',
} = Astro.props as Props;
---

<Gallery
	class="picture-gallery"
	size={columnSize}
>
	{list.map((picture: PrismicDocumentWithUID) => (
		<RevealOnScroll tag="li">
			<a
				class="link | type-link-undecorated"
				href={permalink(picture)}
			>
				<Image
					class="image"
					fit="cover"
					source={picture.data.cover}
					{aspectRatio}
					border
				/>
			</a>
		</RevealOnScroll>
	))}
</Gallery>

<style is:global>
	.picture-gallery .link {
		display: block;
	}
</style>
