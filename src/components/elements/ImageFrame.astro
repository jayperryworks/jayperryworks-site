---
// child components
import Image from '@components/elements/Image.astro';
import ImageFrameDevice from '@components/elements/ImageFrameDevice.astro';
import ImageFrameWall from '@components/elements/ImageFrameWall.astro';

// types
import type { ImageField } from '@prismicio/types';
import type { Frame, ImageFit } from '@lib/types';

export interface Props {
	source: ImageField;
	border?: boolean;
	darkModeSource?: ImageField;
	fit?: ImageFit;
	frame?: Frame;
	maxHeight?: number;
}

const {
	source,
	border,
	darkModeSource,
	fit,
	frame,
	maxHeight,
} = Astro.props as Props;

const imageComponents = {
	'None': {
		component: Image,
		props: {
			border,
			darkModeSource,
			fit,
			maxHeight,
			source,
		},
	},
	'Matte': {
		component: ImageFrameWall,
		props: {
			type: 'matte',
			darkModeSource,
			maxHeight,
			source,
		},
	},
	'Frame & matte': {
		component: ImageFrameWall,
		props: {
			type: 'frame',
			darkModeSource,
			maxHeight,
			source,
		},
	},
	'Panel': {
		component: ImageFrameWall,
		props: {
			type: 'panel',
			darkModeSource,
			maxHeight,
			source,
		},
	},
	'Phone': {
		component: ImageFrameDevice,
		props: {
			type: 'Phone',
			darkModeSource,
			maxHeight,
			source,
		},
	},
	'Tablet (landscape)': {
		component: ImageFrameDevice,
		props: {
			type: 'Tablet (landscape)',
			darkModeSource,
			maxHeight,
			source,
		},
	},
	'Tablet (portrait)': {
		component: ImageFrameDevice,
		props: {
			type: 'Tablet (portrait)',
			darkModeSource,
			maxHeight,
			source,
		},
	},
};

const {
	component: ImageComponent,
	props,
} = imageComponents[frame || 'None'];
---

<ImageComponent {...props} />
